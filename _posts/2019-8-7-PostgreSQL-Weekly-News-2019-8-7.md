---
layout: post
title: PostgreSQL æ¯å‘¨æ–°é—» 2019-8-7
---

### PostgreSQLæ¯å‘¨æ–°é—»#317 - 2019å¹´8æœˆ7æ—¥

![_config.yml]({{ site.baseurl }}/images/PostgresWeekly.png)

å¤‡æ³¨ï¼š[è‹±æ–‡åŸæ–‡åœ°å€](https://postgresweekly.com/issues/317)

![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/v1565174369/cf22e4nqrrvzco0djbht.jpg)

## [ä½¿ç”¨Cå†™Postgresæ’ä»¶çš„åˆçº§æ•™ç¨‹](https://www.percona.com/blog/2019/07/31/postgresql-simple-c-extension-development-for-a-novice-user/)

Postgresé€šè¿‡æ’ä»¶ä½¿è‡ªå·±å®¹æ˜“æ‰©å±•ï¼Œæœ€å¸¸è§çš„æ’ä»¶æ˜¯ç”¨Cè¯­è¨€æ„å»ºçš„ã€‚è¿™ä¸ªåšå®¢æ¼”ç¤ºäº†å¦‚ä½•å»ºç«‹ä¸€ä¸ªåŸºæœ¬çš„Postgresæ‰©å±•é¡¹ç›®å¹¶ä½¿å…¶å·¥ä½œã€‚

`JOBIN AUGUSTINE`

## [å¯¹æ¯”Postgresçš„JSONBå’ŒCouchbase](https://blog.couchbase.com/postgres-jsonb-and-nosql/)

PostgresçœŸçš„èƒ½é€šè¿‡JSONBå–ä»£â€˜NOSQLâ€™æ–‡æ¡£æ•°æ®åº“ä¹ˆï¼Ÿä»ä¸€ä¸ªæ–‡æ¡£æ•°æ®åº“ä¾›åº”å•†çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰æ„æ€çš„è¯é¢˜ã€‚

`DENIS ROSA (COUCHBASE)`

## [å…è´¹çš„ç”µå­ä¹¦](https://pganalyze.com/ebooks/optimizing-postgres-query-performance?utm_source=PostgresWeeklyPrimary)ï¼šå¦‚ä½•å°†ä½ çš„Postgresæ•°æ®åº“æå‡3å€çš„æ€§èƒ½

å­¦ä¹ æˆ‘ä»¬å¦‚ä½•ä¸ºPostgresä¼˜åŒ–æ€§èƒ½,å¦‚ä½•500å€çš„é™ä½ç£ç›˜IOã€‚

`PGANALYZE`**èµåŠ©å•†**

## [Postgres VS MongoDBçš„Benchmarking:'è¦ä¹ˆé€æ˜åŒ–è¦ä¹ˆåˆ«æµ‹è¯•'](https://www.percona.com/blog/2019/07/16/brin-index-for-postgresql-dont-forget-the-benefits/)

æœ€è¿‘æœ‰ä¸€ä¸ªå…³äºPostgreså’ŒMongoDBçš„åŸºå‡†æµ‹è¯•ï¼Œæµ‹è¯•ç»“æœæ˜¾ç¤ºPostgresåŠæ‰“MongoDBã€‚MongoDBå›åº”æµ‹è¯•è€…æ²¡æœ‰å°†ä¸¤ä¸ªæ•°æ®åº“æ”¾ç½®åœ¨å…¬å¹³çš„æµ‹è¯•ç¯å¢ƒä¹‹ä¸‹ã€‚

`ÃLVARO HERNÃNDEZ`



## [Postgresè·å¾—ç»ˆç”Ÿæˆå°±å¥–](https://www.2ndquadrant.com/en/blog/postgresql-award/)

ä¸€ä¸ªé¡¹ç›®è·å¾—â€œç»ˆèº«æˆå°±â€å¥–è®©äººæ„Ÿè§‰å¾ˆå¥‡æ€ªã€‚å¥½åœ¨Mark Wongã€Bruce Momjianå’ŒChristophe Pettusä»£è¡¨PostgreSQLé¡¹ç›®åœ¨O'Reillyçš„Osconæ´»åŠ¨ä¸Šæ¥å—äº†è¯¥å¥–é¡¹ã€‚

`MARK WONG`



## [Postgreså¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒ](https://www.2ndquadrant.com/en/blog/postgresql-regular-expressions-and-pattern-matching/)

æ­£åˆ™è¡¨è¾¾å¼æ˜¯æè¿°æ–‡æœ¬æœç´¢æ¨¡å¼çš„å­—ç¬¦åºåˆ—ã€‚Postgresæ”¯æŒå‡ ç§ä½¿ç”¨regexçš„æ–¹æ³•ã€‚

`MUHAMMAD HAROON`



## [å¦‚ä½•ä¸ºPostgresç¨‹åºè¿›è¡Œlinuxçš„OOM killerè®¾ç½®](https://www.percona.com/blog/2019/08/02/out-of-memory-killer-or-savior/)

oomâ€œkillerâ€è´Ÿè´£ç»ˆæ­¢åº”ç”¨ç¨‹åºï¼Œä»¥å›æ”¶å†…å­˜å¹¶é˜²æ­¢å†…æ ¸å´©æºƒã€‚è¿™é‡Œæœ‰ä¸€äº›å»ºè®®ï¼Œä»¥é¿å…å®ƒå°†Postgresè¿›ç¨‹å¹²æ‰ã€‚

`IBRAR AHMED`



## [ä½¿ç”¨pl pgsql_checkæŸ¥æ‰¾ç¼–è¯‘é”™è¯¯](https://www.percona.com/blog/2019/07/30/using-plpgsql_check-to-find-compilation-errors-and-profile-functions/)

plpgsql_checkæ˜¯ä¸€ä¸ªç±»ä¼¼äºplprofilerçš„é¡¹ç›®ï¼Œå®ƒè¿˜èƒ½æ£€æŸ¥PL/pgSQLä»£ç æŒ‡å‡ºå…¶ä¸­çš„ç¼–è¯‘é”™è¯¯ã€‚

`AVINASH VALLARAPU`



## [ç›‘æ§Postgresæ•°æ®åº“çš„æ ‡å‡†](https://www.influxdata.com/blog/metrics-to-monitor-in-your-postgresql-database/?utm_campaign=postgres&utm_medium=newsletter&utm_source=cooperpress)

å½“æ¶‰åŠåˆ°æ•°æ®åº“æ€§èƒ½æ—¶ï¼Œæ‚¨éœ€è¦è·Ÿè¸ªå‡ ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå®ƒä»¬å¹¶ä¸éƒ½æ˜¯ç‰¹å®šäºæ•°æ®åº“çš„ã€‚

`INFLUXDATA`



## [ä¸ºä»€ä¹ˆPostgresä¸ä¼šè¢«å–æ‰](https://www.2ndquadrant.com/en/blog/postgres-is-the-coolest-database-reason-5-it-can-not-be-bought-out/)

MYSQLä¹‹å‰ä¹Ÿæ˜¯ä¸€æ¬¾å¼€æºæ•°æ®åº“ï¼Œoracleé€šè¿‡æ”¶è´­å…¶æ¯å…¬å¸ï¼Œæ¥ç®¡äº†MYSQLé¡¹ç›®ï¼Œè¿™ç§äº‹æƒ…ä¸ä¼šå‘ç”Ÿåœ¨Postgresã€‚

`UMAIR SHAHID`



## [Barman 2.9ï¼šå¤‡ä»½æ¢å¤ç®¡ç†å·¥å…·](https://www.postgresql.org/about/news/1959/)

æ­¤ç‰ˆæœ¬å¼•å…¥äº†å¯¹å³å°†å‘å¸ƒçš„Postgres12çš„æœ¬æœºæ”¯æŒï¼Œå…¶ä¸­åŒ…æ‹¬å¯¹æ—¶é—´ç‚¹æ¢å¤å’Œå¤åˆ¶ç®¡ç†æ–¹å¼çš„é‡å¤§æ›´æ”¹ã€‚

`2NDQUADRANT`



## [æ€æ ·å°†ä¸€ä¸ªVARCHARç±»å‹çš„æ•°æ®æ˜¾ç¤ºä¸ºencode byteæµ](https://abbas-technical.blogspot.com/2019/07/how-to-display-encoded-byte-stream-of.html)

è™½ç„¶ä¸çŸ¥é“è¿™ä¼šæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„SQLã€‚

`ABBAS`

# ğŸ’¡æœ¬å‘¨æç¤º

###### ä½¿ç”¨pgstattupleå»æŸ¥çœ‹æ— æ•ˆçš„è¡Œå’Œç©ºé—²ç©ºé—´

ç”±[GitPrimeæä¾›

pgstattupleæ˜¯ä¸€ä¸ªå†…ç½®çš„postgresæ‰©å±•ï¼Œå®ƒæä¾›äº†å„ç§å‡½æ•°æ¥æŸ¥çœ‹æ•°æ®åº“ä¸­å„ç§å¯¹è±¡çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ä¸€ç§ç”¨é€”æ˜¯æ£€æŸ¥è¡¨ä¸­æœ‰å¤šå°‘æ­»è¡Œï¼ˆé€šå¸¸æ˜¯ä»è¡¨ä¸­åˆ é™¤æ•°æ®æ—¶å¯¼è‡´çš„ï¼‰æˆ–è€…è¡¨ä¸­æœ‰å¤šå°‘å¯ç”¨ç©ºé—´ã€‚

æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæœ‰1000è¡Œæ•°æ®çš„è¡¨ï¼Œç„¶åçœ‹ä¸€ä¸‹pgstattupleèƒ½å¸¦ç»™æˆ‘ä»¬ä»€ä¹ˆã€‚

```
CREATE TABLE numbers (id int);
INSERT INTO numbers SELECT * FROM generate_series(1,1000);
```

ç°åœ¨è®©æˆ‘ä»¬æ¥ä½¿ç”¨pgstattuple

```
CREATE EXTENSION pgstattuple;
SELECT * FROM public.pgstattuple('numbers');
```

![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/v1565092544/mtu5it0lrih9ho7r2w96.png)

è¿™æ˜¾ç¤ºæˆ‘ä»¬çš„è¡¨é‡Œæœ‰1000è¡Œæ•°æ®ï¼Œæœ‰0ä¸ªæ— æ•ˆtuple

è®©æˆ‘ä»¬åˆ æ‰ä¸€åŠçš„æ•°æ®

```
DELETE FROM numbers WHERE id < 500;
SELECT * FROM public.pgstattuple('numbers');
```

![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/v1565093436/l5mitxgxty3d4f8mj5ke.png)

ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†499çš„æ­»å…ƒç»„è®¡æ•°(æˆ‘ä»¬åˆ é™¤çš„è¡Œæ•°)ã€‚ä½†æ˜¯æ•´ä¸ªè¡¨æ˜¯ä¸€æ ·çš„ã€‚å› ä¸ºé‚£äº›æ— æ•ˆtupleè¿˜å­˜åœ¨ã€‚è¿™å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥è§£å†³ï¼š

```
VACUUM numbers;
```

ä¹‹åé‡æ–°è¿è¡Œpgstatupleå°†ä¸ä¼šæ˜¾ç¤ºæ— æ•ˆè¡Œï¼Œä½†å¯ç”¨ç©ºé—´å¾—åˆ°æå‡ã€‚è¡¨é•¿åº¦ä¿æŒä¸å˜ï¼è¿™æ ·åšçš„åŸå› æ˜¯vacuumå°†æ¸…é™¤æ­»è¡Œå¹¶å°†å…¶è½¬æ¢ä¸ºè‡ªç”±ç©ºé—´ï¼ˆå¯ä»¥é‡æ–°ç”¨äºæ–°è¡Œï¼‰ï¼Œä½†å¦‚æœæ‚¨çœŸçš„å¸Œæœ›Postgresé‡å†™è¡¨å¹¶é‡Šæ”¾è¯¥ç©ºé—´ï¼Œåˆ™éœ€è¦æ›´è¿›ä¸€æ­¥å¹¶ä½¿ç”¨vacuum fullï¼ˆå°½ç®¡æ‚¨éœ€è¦æ³¨æ„æ‰§è¡Œæ­¤æ“ä½œï¼Œåœ¨ç”Ÿäº§è¡¨ä¸Šï¼Œå› ä¸ºå®ƒå¯èƒ½éå¸¸æ…¢ï¼Œå¹¶ä¸”ä¼šä¸€ç›´é”å®šè¡¨ï¼‰ã€‚

æœ¬å‘¨æç¤ºç”±[GitPrime](https://resources.gitprime.com/books/20-patterns/?utm_source=nl(pgw)&utm_medium=email-nl&utm_campaign=nl(pgw))èµåŠ©ã€‚



ğŸ—“  **å³å°†ä¸¾åŠçš„Postgresæ´»åŠ¨**  

â€¢ [PGConf.Brasil 2019](https://www.pgconf.com.br/2019/en/)(8æœˆ1-3æ—¥ï¼Œåœ£ä¿ç½—)â€”â€”ä¸ºæœŸä¸‰å¤©çš„ä¼šè®®ï¼ŒåŒ…æ‹¬è®²åº§ï¼Œæ•™ç¨‹ï¼Œè¯¾ç¨‹å’Œé—ªç”µè®²åº§ã€‚

â€¢ [PGDay Austria 2019](https://pgday.at/en/)ï¼ˆ9æœˆ6æ—¥ï¼Œ ç»´çº³Â·çº½æ–¯å¡”ç‰¹ï¼Œå¥¥åœ°åˆ©ï¼‰

â€¢ [PostgreSQL Conference Asia 2019](https://2019.pgconf.asia/)ï¼ˆ9æœˆ8-11æ—¥ï¼Œå·´å˜å²›ï¼Œå°åº¦å°¼è¥¿äºšï¼‰

â€¢ [PostgresConf South Africa 2019](https://postgresconf.org/conferences/SouthAfrica2019)ï¼ˆ10æœˆ8-9æ—¥ï¼Œçº¦ç¿°å†…æ–¯å ¡ï¼‰â€”â€”æä¾›ç»™ä½¿ç”¨Postgresçš„æ•°æ®åº“ç®¡ç†å’Œå¼€å‘äººå‘˜äº’ç›¸äº†è§£çš„æœºä¼šã€‚